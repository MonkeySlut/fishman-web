document.getElementById("terminal").focus();const xLogoScale=15,yLogoScale=8,xWaveScale=5,yWaveScale=5,arrArgs=["--modules","-m","--pm","--deps","--dev","--t"];var windowWidth=window.innerWidth,windowHeight=window.innerHeight,sitelogo=document.getElementById("fishmanLogo"),wave=document.getElementById("wave");document.onmousemove=function(e){var r=e.pageX/(windowWidth/2)-1,o=e.pageY/(windowHeight/2)-1,n=15*r/2,t=8*o/2,a=5*r/2*-1,s=5*o/2*-1;sitelogo.style.transform="translate("+n+"px, "+t+"px)",wave.style.backgroundPositionX=a+"px",wave.style.backgroundPositionY="calc(100% + ("+s+"px))"};var printProgress=function(e,r){if(r<=100){var o,n=e.cols()-10,t=Math.round(n*r/100),a="",s="";for(o=t;o--;)s+="#";for(o=n-t;o--;)a+="-";e.set_prompt("["+s+a+"] "+r+"%"),100==r&&e.set_prompt("> fishman ")}};const getFileName=function(){const e=new Date;return`${`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}_${`${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`}.tar`};var downloadFileFromBlob=function(){var e=document.createElement("a");return document.body.appendChild(e),e.style="display: none",function(r,o){var n=new Blob(r,{type:"octet/stream"}),t=window.URL.createObjectURL(n);e.href=t,e.download=o,e.click(),window.URL.revokeObjectURL(t)}}();$("#terminal").terminal(function(e,r){var o=io.connect(),n=0;if(o.on("finalDownloadToClient",function(e){var r=new Uint8Array(e);downloadFileFromBlob([r],getFileName())}),o.on("criticalError",function(e){r.error(e.message)}),o.on("regularUpdate",function(e){n+5>=100&&(r.echo("!terminal will clear soon to keep DOM lightweight!"),100==n&&(r.clear(),n=0,r.echo("!DOM cleared!"))),r.echo("[[;"+e.color+";]"+e.message+"]"),n++}),o.on("downloadProgress",function(e){printProgress(r,e.percentage)}),""!==e){var t,a=$.terminal.parse_command("fishaman "+e),s=[],g=!0,l=!0,c=!1;let n=0;for(;n<a.args.length;)if(a.args[n]==arrArgs[0]||a.args[n]==arrArgs[1]){for(let e=n+1;e<a.args.length&&-1===arrArgs.indexOf(a.args[e]);e++)s.push(a.args[e]),n++;n++}else a.args[n]==arrArgs[2]?t=a.args[n+1]:a.args[n]==arrArgs[3]?l="true"===a.args[n+1]:a.args[n]==arrArgs[4]?c="true"===a.args[n+1]:a.args[n]==arrArgs[5]?g="true"===a.args[n+1]:r.error('wrong input "'+a.args[i]+'"'),n+=2;if(t&&s){const e={pm:t,modules:s.map(e=>{const r=e.split(":");return{name:r[0],ver:r[1]}}),incDeps:l,incDevDeps:c,incTypes:g};o.emit("fishmanRequest",e)}else r.error("--pm and --modules is required")}else r.echo("")},{greetings:"",name:"js_demo",height:.25*$(window).height(),prompt:"> fishman "});