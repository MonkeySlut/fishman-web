document.getElementById("terminal").focus();const xLogoScale=15,yLogoScale=8,xWaveScale=5,yWaveScale=5,arrArgs=["--modules","-m","--pm","--deps","--dev","--t"];var windowWidth=window.innerWidth,windowHeight=window.innerHeight,sitelogo=document.getElementById("fishmanLogo"),wave=document.getElementById("wave");document.onmousemove=function(a){var b=a.pageX/(windowWidth/2)-1,c=a.pageY/(windowHeight/2)-1;sitelogo.style.transform="translate("+b*xLogoScale/2+"px, "+c*yLogoScale/2+"px)",wave.style.backgroundPositionX=-1*(b*xWaveScale/2)+"px",wave.style.backgroundPositionY="calc(100% + ("+-1*(c*yWaveScale/2)+"px))"};var printProgress=function(a,b){if(100>=b){var c,d=a.cols()-10,e=Math.round(d*b/100),f="",g="";for(c=e;c--;)g+="#";for(c=d-e;c--;)f+="-";a.set_prompt("["+g+f+"] "+b+"%"),100==b&&a.set_prompt("> fishman ")}};const getFileName=function(){const a=new Date,b=`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()}`,c=`${a.getHours()}:${a.getMinutes()}:${a.getSeconds()}`;return`${b}_${c}.tar`};var downloadFileFromBlob=function(){var b=document.createElement("a");return document.body.appendChild(b),b.style="display: none",function(a,c){var d=new Blob(a,{type:"octet/stream"}),e=window.URL.createObjectURL(d);b.href=e,b.download=c,b.click(),window.URL.revokeObjectURL(e)}}();$("#terminal").terminal(function(a,b){var c=io.connect(),d=100,e=0,f=0;if(fileBuffer=[],c.on("finalDownloadToClientMD",function(a){ss(c).on("finalDownloadToClient",function(c){c.on("data",function(c){f+=c.length,fileBuffer.push(c);var d=(100*(f/a)).toFixed(2);printProgress(b,d)}),c.on("end",function(){printProgress(b,100);var a=new Uint8Array(f),c=0;fileBuffer.forEach(function(b){for(var d=0;d<b.length;d++)a[c]=b[d],c++}),downloadFileFromBlob([a],getFileName())})})}),c.on("criticalError",function(a){b.error(a.message)}),c.on("regularUpdate",function(a){e+5>=d&&(b.echo("!terminal will clear soon to keep DOM lightweight!"),e==d&&(b.clear(),e=0,b.echo("!DOM cleared!"))),b.echo("[[;"+a.color+";]"+a.message+"]"),e++}),c.on("downloadProgress",function(a){printProgress(b,a.percentage)}),""!==a){var g,h=$.terminal.parse_command("fishaman "+a),k=[],l=!0,m=!0,n=!1;for(let a=0;a<h.args.length;)if(h.args[a]==arrArgs[0]||h.args[a]==arrArgs[1]){for(let b=a+1;b<h.args.length&&-1===arrArgs.indexOf(h.args[b]);b++)k.push(h.args[b]),a++;a++}else h.args[a]==arrArgs[2]?g=h.args[a+1]:h.args[a]==arrArgs[3]?m="true"===h.args[a+1]:h.args[a]==arrArgs[4]?n="true"===h.args[a+1]:h.args[a]==arrArgs[5]?l="true"===h.args[a+1]:b.error("wrong input \""+h.args[i]+"\""),a+=2;if(g&&k){const a=k.map(a=>{const b=a.split(":");return{name:b[0],ver:b[1]}}),b={pm:g,modules:a,incDeps:m,incDevDeps:n,incTypes:l};c.emit("fishmanRequest",b)}else b.error("--pm and --modules is required")}else b.echo("")},{greetings:"",name:"js_demo",height:.25*$(window).height(),prompt:"> fishman "});